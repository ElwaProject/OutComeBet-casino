let body = document.querySelector("body");
let menuIcon = document.querySelector(".header__burger");
let menu = document.querySelector(".menu");
let menuLinks = document.querySelectorAll(".menu__link");
menuIcon.addEventListener("click", function (e) {
	menuIcon.classList.toggle("_active");
	menu.classList.toggle("_active");
	body.classList.toggle("_lock");
});
document.addEventListener("click", function (e) {
	console.log(e.target);
	if (
		(menu.classList.contains("_active") && e.target.classList.contains("menu__link")) ||
		e.target.classList.contains("logo__img") ||
		e.target.classList.contains("logo")
	) {
		menuIcon.classList.remove("_active");
		menu.classList.remove("_active");
		body.classList.remove("_lock");
	}
});

video = document.querySelector("video");
videoPlay = document.querySelector(".video__button");

if (video) {
	videoPlay.addEventListener("click", function (e) {
		if (video.classList.contains("_active")) {
			video.pause();
			videoPlay.classList.remove("_active");
			video.classList.remove("_active");
		} else {
			video.play();
			videoPlay.classList.add("_active");
			video.classList.add("_active");
		}
	});
}
function testWebP(callback) {
	var webP = new Image();
	webP.onload = webP.onerror = function () {
		callback(webP.height == 2);
	};
	webP.src =
		"data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";
}
testWebP(function (support) {
	if (support == true) {
		document.querySelector("body").classList.add("_webp");
	} else {
		document.querySelector("body").classList.add("_no-webp");
	}
});
popupClose = document.querySelector(".popup__close");
popupBody = document.querySelector(".popup__body");
popupClose.addEventListener("click", function (e) {
	if (popupBody.classList.contains("_active")) {
		popupBody.classList.remove("_active");
		body.classList.remove("_lock");
	}
});

popupBtns = document.querySelectorAll(".contact-us");
for (let index = 0; index < popupBtns.length; index++) {
	const popupBtn = popupBtns[index];
	popupBtn.addEventListener("click", function (e) {
		popupBody.classList.add("_active");
		body.classList.add("_lock");
	});
}
popupSend = document.querySelector(".popup__btn");
popupForm = document.querySelector(".popup__form");
popupSend.addEventListener("click", function (e) {
	e.preventDefault();
	popupForm.classList.add("_send");
	setTimeout(function () {
		popupForm.classList.remove("_send");
		popupBody.classList.remove("_active");
		body.classList.remove("_lock");
	}, 3000);
});
